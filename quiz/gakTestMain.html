<!DOCTYPE HTML>

<html>
	<head>
		<title>투플+</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		
		<!-- Twoppl Style -->		
		<link rel="stylesheet" href="../assets/css/main.css" />
	
		
		<!-- Styles -->
		<link href="../assets/css/app.css" rel="stylesheet">
		<link href="../assets/css/mbti.css" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css2?family=Yeon+Sung&display=swap" rel="stylesheet">
		
		<style>
			#header{padding-top: 20px;}
			.inner{height: 10px;}
		</style>

	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<div class="inner align-center">

							<!-- Logo -->
								<a href="../index.html" class="logo">
									<span class="symbol"><img src="../images/logo.svg" alt="" /></span><span class="title">투플+</span>
								</a>
						</div>
					</header>

				<!-- Main -->
					
				
				<div class="mbti-container">

					<div class="mbti-question">Q1. 당신의 키는?</div>
					<div class="mbti-answer a1">~168cm</div>
					<div class="mbti-answer a2">169~173cm</div>
					<div class="mbti-answer a3">174~177cm</div>
					<div class="mbti-answer a4">178cm~</div>
				
					<div class="pagi">
				
				<div class="page">
					1/15
				</div>
					
					
				<div class="pb">
					<div class="progress-inner"></div>
        		</div>
							
			</div>
									
			
			</div>
		</div>
				

		<!-- Scripts -->
			<script src="../assets/js/jquery.min.js"></script>
			<script src="../assets/js/browser.min.js"></script>
			<script src="../assets/js/breakpoints.min.js"></script>
			<script src="../assets/js/util.js"></script>
			<script src="../assets/js/main.js"></script>
		
			<script>
				let progressBar = $(".progress-inner");
				progressBar.css("width", `${100/15}%`);

					let questions = [
					{"q1": "당신의 키는?", 
					 "a1": "~168cm", "a2": "169~173cm", "a3": "174~177cm", "a4" : "178cm~",
					 "aw1": "1", "aw2": "2", "aw3": "3", "aw4": "4"},
						
					{"q1": "당신의 몸무게는?", 
					 "a1": "~55kg", "a2": "56~72kg", "a3": "73~86kg", "a4" : "87kg~",
					 "aw1": "1", "aw2": "2", "aw3": "3", "aw4": "4"},


					{"q1": "벤치프레스 1회 최대 무게는?", 
					 "a1": "~40kg", "a2": "40~60kg", "a3": "60~100kg", "a4" : "100kg~",
					 "aw1": "1", "aw2": "2", "aw3": "3", "aw4": "4"},
						
					{"q1": "데드리프트 1회 최대 무게는?", 
					 "a1": "~60kg", "a2": "60~90kg", "a3": "90~130kg", "a4" : "130kg~",
					 "aw1": "1", "aw2": "2", "aw3": "3", "aw4": "4"},
						
					{"q1": "스쿼트 1회 최대 무게는?", 
					 "a1": "~60kg", "a2": "60~90kg", "a3": "90~130kg", "a4" : "130kg~",
					 "aw1": "1", "aw2": "2", "aw3": "3", "aw4": "4"},
						

							
					{"q1": "일주일에 헬스장 가는 횟수는?", 
					 "a1": "주 0~3회", "a2": "주 4회 이상", 
					 "a1_mbti": "N", "a2_mbti": "E"},
						
					{"q1": "집에 있는 홈트레이닝 기구는 주로", 
					 "a1": "줄넘기, 악력기, 훌라우프", "a2": "아령, 턱걸이, 바벨, 푸쉬업바", 
					 "a1_mbti": "F", "a2_mbti": "T"},
						
					{"q1": "야 오랜만인데 한잔하자!", 
					 "a1": "그래 오늘 한잔 꺽자", "a2": "꺼져라 내친구는 아령이다", 
					 "a1_mbti": "J", "a2_mbti": "P"},
						
					{"q1": "오빠.. 미안한데 오늘 운동 안가면 안될까?", 
					 "a1": "그래~ 운동이야 다음에 하면 돼, 보자!", "a2": "남자가 쇠질하러 가는데 어디, 헤어지자!", 
					 "a1_mbti": "N", "a2_mbti": "S"},
						
					{"q1": "아놀드가 우리 헬스장 트레이너로 왔는데 회당 15만원이다", 
					 "a1": "너무 비싸다", "a2": "인생 기회다", 
					 "a1_mbti": "S", "a2_mbti": "N"},
						
					{"q1": "후인하강을 안다", 
					 "a1": "안다", "a2": "모른다", 
					 "a1_mbti": "S", "a2_mbti": "N"},
						
					{"q1": "지금 냉동실을 열어봐라. 닭가슴살이", 
					 "a1": "있다", "a2": "없다", 
					 "a1_mbti": "S", "a2_mbti": "N"},
						
					{"q1": "박재범 몸 6개월이면 만든다", 
					 "a1": "맞다", "a2": "아니다", 
					 "a1_mbti": "S", "a2_mbti": "N"},
						
					{"q1": "구독하고 있는 운동 유튜버가 있다", 
					 "a1": "있다", "a2": "없다", 
					 "a1_mbti": "S", "a2_mbti": "N"},
						
					{"q1": "어깨 근육은 크게 몇부분으로 되어있나?", 
					 "a1": "3부분", "a2": "5부분", 
					 "a1_mbti": "S", "a2_mbti": "N"},						
				];

				let result = {};
				let questionProgress = 1;
				

				$(".mbti-answer").on("click", function() {
					let q = questions[questionProgress-1];
					
					if (questionProgress <= 4 ){
												
						if ($(this).hasClass("a1")) {
							if (q["a1_mbti"] in result) { 
								result[q["a1_mbti"]] += 1;
							} else {
								result[q["a1_mbti"]] = 1; 
							}
							
						} else if ($(this).hasClass("a2")){ 

							if (q["a2_mbti"] in result) { 
								result[q["a2_mbti"]] += 1;
							} else {
								result[q["a2_mbti"]] = 1; 
							}
						
						} else if ($(this).hasClass("a3")){
								   
							if (q["a1_mbti"] in result) { 
								result[q["a1_mbti"]] += 1;
							} else {
								result[q["a1_mbti"]] = 1; 
							}

								   
								   
						} else if ($(this).hasClass("a4")){
					
							if (q["a1_mbti"] in result) { 
								result[q["a1_mbti"]] += 1;
							} else {
								result[q["a1_mbti"]] = 1; 
							}

							
						}
				
						questionProgress += 1;
						q = questions[questionProgress-1];

						//$(".mbti-step").text(`${questionProgress}/12`);
						progressBar.css("width", `${100/15*questionProgress}%`);
						$(".page").text(`${questionProgress}/15`);

						$(".mbti-question").text(`Q${questionProgress}. ${q["q1"]}`);
						$(".a1").text(`${q["a1"]}`);
						$(".a2").text(`${q["a2"]}`);
						$(".a3").text(`${q["a3"]}`);	
						$(".a4").text(`${q["a4"]}`);	
						
						
					} else if (questionProgress > 4 && questionProgress <=14) {

						$(".a3").css("display", "none");
						$(".a4").css("display", "none");
						
						if ($(this).hasClass("a1")) 
						{
							if (q["a1_mbti"] in result) { 
								result[q["a1_mbti"]] += 1;
							} else {
								result[q["a1_mbti"]] = 1; 
							}
						} else { 

							if (q["a2_mbti"] in result) { 
								result[q["a2_mbti"]] += 1;
							} else {
								result[q["a2_mbti"]] = 1; 
							}
						}	
						
						questionProgress += 1;
						q = questions[questionProgress-1];

						//$(".mbti-step").text(`${questionProgress}/12`);
						progressBar.css("width", `${100/15*questionProgress}%`);
						$(".page").text(`${questionProgress}/15`);

						$(".mbti-question").text(`Q${questionProgress}. ${q["q1"]}`);
						$(".a1").text(`${q["a1"]}`);
						$(".a2").text(`${q["a2"]}`);	

							
					
						
					} else{ 
						
						console.log("in if 13 : " + questionProgress);

						console.log("result : ");
						console.log(result);
						
						// 배열 값이 2 이상인 것 만 필터링하는 함수
						function filterItems(arr) {
							return Object.keys(arr).filter(el => arr[el] >= 2);
						}

						let tmp = [
							"IE",
							"SN",
							"TF",
							"JP"
						];
						
						let mbti = filterItems(result).join("");
						
						// MBTI 순서대로 정렬
						let newMbti = [];
						for (let i = 0; i < mbti.length; i++) {
							for (let k = 0 ; k < tmp.length; k++) {
								if (mbti[i] === tmp[k][0] || mbti[i] === tmp[k][1]) {
									newMbti[k] = mbti[i];
									break;
								}
							}
						}
						
						mbti = newMbti.join("");
						//location.href = `/mbti/${mbti}`;
						
						

						return;

					}
					
				

					
				});
			</script>
				

	</body>
</html>