<!DOCTYPE HTML>

<html>
	<head>
		<title>투플+</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="../assets/css/main.css" />
		<noscript><link rel="stylesheet" href="../assets/css/noscript.css" /></noscript>
		<style>
			h2{
				margin: 0em 0em 0.4em 0em;
			}
			
			.quiz {
            width: 80%;
            margin: auto;
            display: flex;
            flex-direction: column;
            padding: 0em 0.3em 0em 0.3em;
            }

            .quizName {
            font-size:1.4em;
            text-align: center;
            margin: 0em 0em 1em 0em;
            }

            .choice-flexbox {
            display: flex;
            flex-direction: column;
            align-items: center;
            }

            .options {
            width: 80%;
            font-size: 1.3em;
            text-align: center;
            color: white;
            background-color: #FE2E64;
            margin: 0.2em;
            border-radius: 8px;
            padding: 0.5em;
            }

            .progress {
            width: 100%;
            padding-top: 2em;
            margin-top: 2em;
            }

            #progress{
            width: 100%;
            }

            .refresh {
            font-size: 1.2em;
            color: white;
            background-color: #FE2E64;
            margin: 0.2em;
            border-radius: 8px;
            margin-top: 1em;
            padding: 0.5em;
            width: 150px;
            text-align: center;
            }

            .refresh:hover {
            transform: scale(1.02);
            cursor: pointer;
            }

            .refresh:focus {
            outline: none;
            }
			
			.goQuiz{
			font-size: 1.2em;
            color: white;
            background-color: #FE2E64;
            margin: 0.2em;
            border-radius: 8px;
            margin-top: 1em;
            padding: 0.5em;
            width: 150px;
            text-align: center;
			}
			
			.goQuiz:hover{
			transform: scale(1.02);
            cursor: pointer;	
			}

			.goquiz:focus {
            outline: none;
            }
			
			#header{
				padding-top : 20px;
				margin-bottom : 50px;
			}
			
			
		</style>
	</head>
	<body class="is-preload">
		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<div class="inner align-center">

							<!-- Logo -->
							<a href="../index.html" class="logo">
								<span class="symbol"><img src="../images/logo.svg" alt="" /></span><span class="title">투플+</span>
							</a>

						</div>
					</header>

				<!-- Menu -->
					<nav id="menu">
						<h2>Menu</h2>
						<ul>
							<li><a href="../index.html">메인</a></li>
							<li><a href="../board.html">게시판</a></li>
							<li></li>
						</ul>
					</nav>

				<!-- Main -->
					<div id="main">
						<div class="inner">
							<header></header>				
							
							<!-- title Quiz -->
							<div class="align-center">
								<div id='wrap'>
									
									<!-- quiz -->
									<div class='quiz' id="quiz-area">

										<div class='quizName' id="quizName"></div>

										<div class='choice-flexbox'>
											<div class="options" id="option0"></div>
											<div class="options" id="option1"></div>
											<div class="options" id="option2"></div>
											<div class="options" id="option3"></div>
										</div>
									</div>

									<!-- progress bar -->
									<div class="progress">
										<div><progress id="progress" max="100" value="0"></progress></div>
									</div>
									
								</div>
							</div>


																				
						</div> <!--end of inner-->
					</div> <!--end of main-->
				
				
			</div>
				

		<!-- Scripts -->
			<script src="../assets/js/jquery.min.js"></script>
			<script src="../assets/js/browser.min.js"></script>
			<script src="../assets/js/breakpoints.min.js"></script>
			<script src="../assets/js/util.js"></script>
			<script src="../assets/js/main.js"></script>
		
			<script>

			  // Controller (Quiz 객체)
			  function Quiz(questionList) {
				this.score = 0;  
				this.questionList = questionList; // 이부분에 퀴즈가 리스트로 입력
				this.questionNo = 0;

				// (+ 여기에 정답에 대한 변수들을 다양화 해서 사용할 수 있음)



			  };

			  Quiz.prototype.getCurrentQuestion = function() {
				return this.questionList[this.questionNo];
			  };

			  Quiz.prototype.isEnded = function() {
				return this.questionNo == this.questionList.length;
			  };

			  Quiz.prototype.evaluateAnswer = function(answer) {
				if (this.getCurrentQuestion().checkAnswer(answer)) {
				  this.score++; // 정답일 경우 score가 증가


				};
				this.questionNo++; // 대답을 하게되면 qustionNo가 증가
			  }


			  // View
			  function quizInit() {
				if (quiz.isEnded()) {
				  showScores();

				} else {
				  var element = document.getElementById('quizName');
				  element.innerHTML = quiz.getCurrentQuestion().quizName;

				  for (i = 0; i < quiz.getCurrentQuestion().quizList.length; i++) {
					var element = document.getElementById('option' + i);
					element.innerHTML = quiz.getCurrentQuestion().quizList[i];

					// 클릭한 내용 확인하는 부분
					checkAnswer('option' + i, quiz.getCurrentQuestion().quizList[i]); // checkAnswer를 통해 각 버튼에 onclick을 추가, option i와 퀴즈 answer를 evaluateAnswer에게 전달
					recordProgress();
				  };
				}
			  };

			  function checkAnswer(htmlId, answer) {
				var element = document.getElementById(htmlId);
				element.onclick = function() {
				  quiz.evaluateAnswer(answer); // 여기에서 score, questionNo 증가 후 다음 퀴즈로 넘어가게 됨

				  quizInit();
				};
			  };


			  function recordProgress() {
				var element = document.getElementById('progress');
				element.setAttribute('value', quiz.questionNo);
			  }

			  function showScores() {
				var scoreString = "<div class='row aln-center'><h1>결과</h1>";
				scoreString += "<h3>You scored " + quiz.score + " out of " + quiz.questionList.length + "</h3>"
				scoreString += "<div id='refresh' class='refresh'>다시하기</div>"
				scoreString += "<div id='goQuiz' class='goQuiz'>다른퀴즈</div>"

				var element = document.getElementById('quiz-area');
				element.innerHTML = scoreString;

				var reTake = document.getElementById('refresh');
				reTake.onclick = function() {
				  refresh()
				}
				
				var goQuiz = document.getElementById('goQuiz');
				goQuiz.onclick = function() {
				  location.href = "../index.html"
				}
			  };

			  function setProgressBar() {
				var element = document.getElementById('progress');
				element.setAttribute('max', quiz.questionList.length);
			  };

			  function refresh() {
				var renewHTML = '<div class="quiz" id="quiz-area"><div class="quizName" id="quizName"></div><div class="choice-flexbox"><div class="options" id="option0"></div><div class="options" id="option1"></div><div class="options" id="option2"></div><div class="options" id="option3"></div></div>	<div class="progress"><div><progress id="progress" max="100" value="0"></progress></div></div></div>'
				var element = document.getElementById('wrap');
				element.innerHTML = renewHTML
				quiz.score = 0;
				quiz.questionNo = 0;

				quizInit();
				setProgressBar();
			  }
				
			  var questions = [
				new Question("<h2 style='color:#FE2E64'>Q1</h2>당신의 키는?", ["160~170cm", "170~175cm", "175~180cm", "180 이상"]),
				new Question("<h2 style='color:#FE2E64'>Q2</h2>몸무게는 몇인가요?", ["65kg 이하", "65~75kg", "75~90kg", "90kg 이상"]),
				new Question("<h2 style='color:#FE2E64'>Q3</h2>일주일에 헬스장 가는 횟수는?", ["등록만 해놨습니다.", "1~2회", "3~4회", "5회 이상"]),
				new Question("<h2 style='color:#FE2E64'>Q4</h2>벤치프레스 중량은?", ["60kg 미만", "60~80kg", "80~100kg", "100kg 이상"]),
				new Question("<h2 style='color:#FE2E64'>Q5</h2>스쿼트 중량은?", ["80kg 미만", "80~130kg", "130~170kg", "170kg 이상"]),
				/*new Question("<h2 style='color:#FE2E64'>Q6</h2>데드리프트 중량은?", ["90kg 미만", "90~140kg", "140~190kg", "190kg 이상"]),
				new Question("<h2 style='color:#FE2E64'>Q7</h2>어떤 운동을 좋아하나요?", ["사람들과 함께 어울리는 운동", "사람들과 함께 하지만 가끔 혼자", "혼자하는 운동", "그냥 혼자가 좋다"]),
				new Question("<h2 style='color:#FE2E64'>Q8</h2>하루 식사는 어떻게 하나요?", ["챙겨 먹는게 귀찮다", "먹고싶은대로 먹는다", "나름 식단 관리 한다", "철저한 계획으로 식단관리"]),
				new Question("<h2 style='color:#FE2E64'>Q9</h2>헬스하는 날인데 여자친구가 갑자기 보자고 했다", ["여자친구 우선, 당장 보러간다", "타협, 세트수를 반 줄인다", "유도, 헬스장 데이트 하자", "불허, 나에겐 운동이다"]),
				new Question("<h2 style='color:#FE2E64'>Q10</h2>후인하강의 의미를 안다", ["후인하강 완벽 이해", "잘 알지만 하기는 어렵다", "들어는 본 것 같다", "후인하강??"]),
				new Question("<h2 style='color:#FE2E64'>Q11</h2>어떤 운동 스타일을 선호하나요", ["스트랭스 운동", "보디빌딩", "크로스 핏", "맨몸 운동"])*/
			  ]

			  // Model
			  function Question(quizName, quizList) {
				this.quizName = quizName;
				this.quizList = quizList;
			  }

			  Question.prototype.checkAnswer = function(choice) {
				return (choice === this.answer);
			  }


			  // main
			  var quiz = new Quiz(questions);

			  quizInit();
			  setProgressBar();

			</script>		

	</body>
</html>